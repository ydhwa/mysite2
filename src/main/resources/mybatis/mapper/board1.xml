<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board1">

	<insert id="insert" parameterType="boardvo">
		<![CDATA[
			insert
			into board
			values(null, #{ title }, #{ contents }, now(), 0, #{ userNo });
		]]>
	</insert>

	<update id="update" parameterType="boardvo">
		<![CDATA[
			update board
			set title = #{ title }, contents = #{ contents }
			where no = #{ no };
		]]>
	</update>

	<select id="getByNo" parameterType="long" resultType="boardvo">
		<![CDATA[
			select b.no as no,
				u.name as username,
				title,
				contents,
				date_format(b.reg_date, '%Y-%m-%d %H:%i:%s') as regdate,
				views,
				b.user_no as userno
			from board b, user u
			where b.user_no = u.no
				and b.no = #{ value };
		]]>
	</select>

	<select id="getList" resultType="boardvo">
		<![CDATA[
			select b.no as no,
				u.name as username,
				title,
				date_format(b.reg_date, '%Y-%m-%d %H:%i:%s') as regdate,
				views
			from board b, user u
			where b.user_no = u.no
			order by regdate desc;
		]]>
	</select>
</mapper>
